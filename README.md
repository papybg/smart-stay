–¢–æ–≤–∞ –µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω –∏ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω **README.md** —Ñ–∞–π–ª, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –∑–∞ –¥—Ä—É–≥ –∏–∑–∫—É—Å—Ç–≤–µ–Ω –∏–Ω—Ç–µ–ª–µ–∫—Ç (–∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫). –¢–æ–π –æ–ø–∏—Å–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ç–∞, —Ç–µ–∫—É—â–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ –∏ –±—ä–¥–µ—â–∏—Ç–µ —Å—Ç—ä–ø–∫–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ **Smart Stay**.

---

# üè® Smart Stay Agent: –°–∏—Å—Ç–µ–º–∞ –∑–∞ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∏ –ù–∞–µ–º–∏

### üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç—ä—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ –∏–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∏ –ø–æ–¥ –Ω–∞–µ–º (—Ç–∏–ø Airbnb). –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–∞ –∏–∑–∫—É—Å—Ç–≤–µ–Ω –∏–Ω—Ç–µ–ª–µ–∫—Ç (Gemini 3), —Å–º–∞—Ä—Ç —Ö–∞—Ä–¥—É–µ—Ä (Tuya IoT) –∏ –æ–±–ª–∞—á–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ (Neon PostgreSQL) –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è—Ç–∞ —Å –≥–æ—Å—Ç–∏—Ç–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –µ–Ω–µ—Ä–≥–∏—è—Ç–∞.

---

### üöÄ –õ–æ–≥–∏–∫–∞ –Ω–∞ —Ä–∞–±–æ—Ç–∞ –∏ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç

1. **AI –†–µ—Ü–µ–ø—Ü–∏—è:** –ì–æ—Å—Ç—ä—Ç –∫–æ–º—É–Ω–∏–∫–∏—Ä–∞ —Å —á–∞—Ç–±–æ—Ç, –∫–æ–π—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –∫–æ–¥–æ–≤–µ –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ.
2. **Smart Power Control:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–æ –ø—É—Å–∫–∞–Ω–µ –Ω–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ—Ç–æ 2 —á–∞—Å–∞ –ø—Ä–µ–¥–∏ –Ω–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ (—á—Ä–µ–∑ Cron Job).
3. **–î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–µ–±-–±–∞–∑–∏—Ä–∞–Ω –ø–∞–Ω–µ–ª –∑–∞ —Ä—ä—á–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –µ–ª–µ–∫—Ç—Ä–æ—É—Ä–µ–¥–∏—Ç–µ —Å –æ–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞ –æ—Ç –æ–±–ª–∞–∫–∞.
4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞ –≤—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∏—Ä–∞—â —É–Ω–∏–∫–∞–ª–Ω–∏ –ü–ò–ù –∫–æ–¥–æ–≤–µ.

---

### üìÇ –§–∞–π–ª–æ–≤–∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ

#### 1. `server.js` (Backend - Node.js)

* **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Express.js, `@tuya/tuya-connector-nodejs`, `@google/generative-ai`, `pg` (PostgreSQL), `node-cron`.
* **–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:**
* **–ê–≤—Ç–æ–ø–∏–ª–æ—Ç:** –°–∫—Ä–∏–ø—Ç, –∫–æ–π—Ç–æ —Å–∫–∞–Ω–∏—Ä–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –Ω–∞ –≤—Å–µ–∫–∏ 10 –º–∏–Ω—É—Ç–∏ –∏ –ø—É—Å–∫–∞ —Ç–æ–∫–∞ –ø—Ä–∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è (–ø—Ä–æ–∑–æ—Ä–µ—Ü: 2-6 —á–∞—Å–∞ –æ—Ç —Ç–µ–∫—É—â–∏—è –º–æ–º–µ–Ω—Ç).
* **AI Engine:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ **Gemini 3 Flash Preview** —Å—ä—Å —Å–∏—Å—Ç–µ–º–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–¥–æ–≤–µ –∏ –ª—é–±–µ–∑–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä.
* **API Endpoints:** `/chat`, `/toggle`, `/status`, `/add-booking`, `/bookings`.


* **–ë—Ä–æ–π —Ä–µ–¥–æ–≤–µ:** ~142.

#### 2. `admin.html` (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–µ–Ω –ü–∞–Ω–µ–ª)

* **–§—É–Ω–∫—Ü–∏—è:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫–∞.
* **–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:** –§–æ—Ä–º–∞ –∑–∞ –≤—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–º–µ, `datetime-local` –∑–∞ –≤—Ö–æ–¥/–∏–∑—Ö–æ–¥ –∏ –∫–æ–¥ –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è. –¢–∞–±–ª–∏—Ü–∞, –ø–æ–∫–∞–∑–≤–∞—â–∞ —Ä–µ–∞–ª–Ω–∏—Ç–µ –∑–∞–ø–∏—Å–∏ –æ—Ç Neon DB —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—Ç–µ 6-—Ü–∏—Ñ—Ä–µ–Ω–∏ –ü–ò–ù –∫–æ–¥–æ–≤–µ.
* **–ë—Ä–æ–π —Ä–µ–¥–æ–≤–µ:** ~85.

#### 3. `remote.html` (–î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

* **–§—É–Ω–∫—Ü–∏—è:** –†—ä—á–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª –Ω–∞ —Å–º–∞—Ä—Ç –µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–∞.
* **–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:** –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–µ–Ω –±—É—Ç–æ–Ω —Å—ä—Å —Å—Ç–∞—Ç—É—Å –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ. –ò–∑–ø–æ–ª–∑–≤–∞ `setInterval` (3 —Å–µ–∫), –∑–∞ –¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞ –≤–∏–∑—É–∞–ª–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ (ON/OFF) –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –¥–∞–Ω–Ω–∏—Ç–µ –≤ Tuya Cloud.
* **–ë—Ä–æ–π —Ä–µ–¥–æ–≤–µ:** ~85.

#### 4. `.env` (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è - –°–∫—Ä–∏—Ç–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏)

* –°—ä–¥—ä—Ä–∂–∞: `GEMINI_API_KEY`, `TUYA_ACCESS_ID`, `TUYA_ACCESS_SECRET`, `TUYA_DEVICE_ID`, `DATABASE_URL` (Neon).

---

### ‚úÖ –ö–∞–∫–≤–æ –µ –ø—Ä–µ–º–∏–Ω–∞—Ç–æ (–ó–∞–≤—ä—Ä—à–µ–Ω–∏ –µ—Ç–∞–ø–∏)

* [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ Tuya Cloud API (V1.0) —Å—ä—Å —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –ø–æ–¥–ø–∏—Å–≤–∞–Ω–µ (Signature).
* [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ Neon PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —Å —Ç–∞–±–ª–∏—Ü–∞ `bookings`.
* [x] –°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ Gemini 3 Flash Preview —Å –ª–æ–≥–∏–∫–∞ –∑–∞ "Function Calling" (—á—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤–∏ –º–∞—Ä–∫–µ—Ä–∏ –∫–∞—Ç–æ `CHECK_CODE`).
* [x] –ö–æ—Ä–µ–∫—Ü–∏—è –Ω–∞ —á–∞—Å–æ–≤–∏—Ç–µ –∑–æ–Ω–∏ (UTC vs EET) –∑–∞ –ø—Ä–µ—Ü–∏–∑–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è.
* [x] –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Remote –ø–∞–Ω–µ–ª —Å —Ä–µ–∞–ª–µ–Ω —Å—Ç–∞—Ç—É—Å.

---

### üõ† –ö–∞–∫–≤–æ –æ—Å—Ç–∞–≤–∞ –¥–∞ —Å–µ –Ω–∞–ø—Ä–∞–≤–∏ (–ë—ä–¥–µ—â–∏ –µ—Ç–∞–ø–∏)

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ –°–º–∞—Ä—Ç –ë—Ä–∞–≤–∞:** –°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ –ü–ò–ù –∫–æ–¥–∞ –æ—Ç –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ —Å —Ä–µ–∞–ª–Ω–∞ –±—Ä–∞–≤–∞ (TTLock –∏–ª–∏ Tuya Lock API).
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WhatsApp/Viber API –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –ü–ò–ù –∫–æ–¥–∞ –∫—ä–º –≥–æ—Å—Ç–∞ –ø—Ä–∏ –ø–ª–∞—â–∞–Ω–µ.
3. **–ï–Ω–µ—Ä–≥–∏–µ–Ω –æ—Ç—á–µ—Ç:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω—Å—É–º–∏—Ä–∞–Ω–∞—Ç–∞ –µ–Ω–µ—Ä–≥–∏—è –æ—Ç –µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–∞ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –≤ Remote –ø–∞–Ω–µ–ª–∞.
4. **–°–∏–≥—É—Ä–Ω–æ—Å—Ç:** –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏–∫–∞—Ü–∏—è (Login) –∑–∞ `admin.html` –∏ `remote.html`.

---

### ‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –±–µ–ª–µ–∂–∫–∏ –∑–∞ —Å–ª–µ–¥–≤–∞—â–∏—è AI

* **–ú–æ–¥–µ–ª–∏:** –î–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ **Gemini 3 Flash Preview** –∏–ª–∏ **Gemini 3 Pro Preview**.
* **–ë–∞–∑–∞ –¥–∞–Ω–Ω–∏:**Neon DB —Ä–∞–±–æ—Ç–∏ —Å—ä—Å SSL –≤—Ä—ä–∑–∫–∞.
* **–•–∞—Ä–¥—É–µ—Ä:** Tuya —Å—ä—Ä–≤—ä—Ä—ä—Ç –µ –±–∞–∑–∏—Ä–∞–Ω –≤ –ï–≤—Ä–æ–ø–∞ (`https://openapi.tuyaeu.com`).

---

**–ú–æ–≥–∞ –ª–∏ –¥–∞ —Ç–∏ –ø–æ–º–æ–≥–Ω–∞ —Å –Ω–µ—â–æ –¥—Ä—É–≥–æ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞ –∏–ª–∏ —Å–∏ –≥–æ—Ç–æ–≤ –∑–∞ —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Å—Ç—ä–ø–∫–∞?**