# Smart Stay - AI Rental Management üè†ü§ñ

–ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ –≤–∞–∫–∞–Ω—Ü–∏–æ–Ω–Ω–∏ –∏–º–æ—Ç–∏, —É–ø—Ä–∞–≤–ª—è–≤–∞–Ω–∞ –æ—Ç **–ò–∫–æ** ‚Äì —Ç–≤–æ—è—Ç –≤–∏—Ä—Ç—É–∞–ª–µ–Ω –∏–∫–æ–Ω–æ–º.

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∏?

1. **AI Detective (Gmail Sync)**: –ò–∫–æ —Å–∫–∞–Ω–∏—Ä–∞ Gmail –Ω–∞ –≤—Å–µ–∫–∏ 15 –º–∏–Ω—É—Ç–∏ –∑–∞ –Ω–æ–≤–∏ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏—è –æ—Ç Airbnb. –ò–∑–ø–æ–ª–∑–≤–∞ **Gemini 2.5 Flash**, –∑–∞ –¥–∞ –∏–∑–≤–ª–µ—á–µ –∏–º–µ–Ω–∞—Ç–∞ –Ω–∞ –≥–æ—Å—Ç–∏—Ç–µ, –¥–∞—Ç–∏—Ç–µ –∏ –∫–æ–¥–æ–≤–µ—Ç–µ –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è, —Å–ª–µ–¥ –∫–æ–µ—Ç–æ –≥–∏ –∑–∞–ø–∏—Å–≤–∞ –≤ **Neon DB**.
2. **Smart Power Control**: –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∫–ª—é—á–≤–∞ —Ç–æ–∫–∞ –≤ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (–ø—Ä–µ–∑ Tuya API) **2 —á–∞—Å–∞ –ø—Ä–µ–¥–∏** –Ω–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ—Ç–æ –∏ –≥–æ –∏–∑–∫–ª—é—á–≤–∞ **1 —á–∞—Å —Å–ª–µ–¥** –Ω–∞–ø—É—Å–∫–∞–Ω–µ—Ç–æ.
3. **iCal Sync**: –ì–µ–Ω–µ—Ä–∏—Ä–∞ –¥–∏–Ω–∞–º–∏—á–µ–Ω `/calendar.ics` —Ñ–∞–π–ª, –∫–æ–π—Ç–æ —Å–µ –ø–æ–¥–∞–≤–∞ –∫—ä–º Airbnb, –∑–∞ –¥–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏ –≥—Ä–µ—à–∫–∏ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è—Ç–∞.
4. **Guest Chat**: –ì–æ—Å—Ç–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞ —á–∞—Ç—è—Ç —Å –ò–∫–æ, –¥–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç —Å–≤–æ—è –ü–ò–ù –∑–∞ –¥–æ—Å—Ç—ä–ø –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø—Ä–µ—Å—Ç–æ—è —Å–∏ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ–Ω —Å—Ç–µ–∫

- **Backend**: Node.js, Express (Render)
- **AI**: gemini-3.0-pro-preview", "gemini-flash-latest", "gemini-3-flash-preview"
- **Database**: Neon (PostgreSQL)
- **IoT**: TuyAPI (Tuya Smart Life)
- **Integrations**: Gmail API, Google OAuth2

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `server.js`: –û—Å–Ω–æ–≤–µ–Ω —Å—ä—Ä–≤—ä—Ä, API –º–∞—Ä—à—Ä—É—Ç–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ —Ç–æ–∫–∞.
- `services/detective.js`: AI –ª–æ–≥–∏–∫–∞ –∑–∞ —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –∏–º–µ–π–ª–∏ –∏ –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏.
- `public/index.html`: –ß–∞—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞ –≥–æ—Å—Ç–∏—Ç–µ.
- `public/admin.html`: –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏—Ç–µ.
- `public/remote.html`: –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ç–æ–∫–∞.

## ‚öôÔ∏è –ú–∞—Ä—à—Ä—É—Ç–∏ (Endpoints)

- `POST /api/chat` - –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –ò–∫–æ.
- `GET /bookings` - –°–ø–∏—Å—ä–∫ —Å —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ (Admin).
- `POST /add-booking` - –†—ä—á–Ω–æ –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –≥–æ—Å—Ç (Admin).
- `GET /status` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ —Ç–æ–∫–∞ (Remote).
- `GET /toggle` - –†—ä—á–Ω–æ –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ —Ç–æ–∫–∞ (Remote).
- `GET /calendar.ics` - iCal –∫–∞–ª–µ–Ω–¥–∞—Ä –∑–∞ Airbnb.

## üîë Environment Variables (Render)

–î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–ª—é—á–æ–≤–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –Ω–∞ Render:

- `DATABASE_URL` (Neon Postgres)
- `GEMINI_API_KEY` (Google AI Studio)
- `GMAIL_CLIENT_ID`, `GMAIL_CLIENT_SECRET`, `GMAIL_REFRESH_TOKEN`
- `TUYA_DEVICE_ID`, `TUYA_LOCAL_KEY`, `TUYA_DEVICE_IP`

–†–∞–∑—Ä–∞–±–æ—Ç–µ–Ω–æ –æ—Ç PapyBG.